import{u as E,a as F,l as G,b as J,_ as X,i as D}from"./index-f30f1b4a.js";import{g as M,a5 as R,j as s,o as n,p as x,s as b,C as t,l as e,F as A,z as N,V as C,k as m,u as L,t as k,r as S,w as U,N as K,M as Y,O as Z,P,v as O}from"./vendor-47c5f7a7.js";const ee={class:"layout-header"},te={class:"tool-bar-left"},ne={class:"tool-bar-right flex"},oe={class:"label-item logou-wrap"},ae=M({__name:"Header",setup(T){const{$router:a}=E(),{authority:p,theme:h}=F(),{userName:y}=R(p),g=o=>{o==="logout"&&J()},d=[{title:"默认主题",type:"default"},{title:"松石绿主题",type:"green"},{title:"暗夜灰",type:"gray"}],v=o=>{h.setTheme(o)},_=o=>{localStorage.setItem("localeKey",o),a.go(0)};return(o,r)=>{const l=s("tu-svg-icon"),w=s("el-dropdown-item"),$=s("el-dropdown-menu"),f=s("el-dropdown");return n(),x("div",ee,[b("div",te,[t(l,{class:"logo",name:"logo",width:28}),r[0]||(r[0]=b("h2",{class:"logo-text",style:{"margin-left":"12px"}},"基础应用框架",-1))]),b("div",ne,[t(f,{onCommand:_},{dropdown:e(()=>[t($,null,{default:e(()=>[(n(!0),x(A,null,N(C(G),(i,c)=>(n(),m(w,{key:c,command:i.value},{default:e(()=>[L(k(i.label),1)]),_:2},1032,["command"]))),128))]),_:1})]),default:e(()=>[t(l,{name:"lang",width:28,style:{cursor:"pointer"}})]),_:1}),t(f,{onCommand:v},{dropdown:e(()=>[t($,null,{default:e(()=>[(n(),x(A,null,N(d,(i,c)=>t(w,{key:c,command:i.type},{default:e(()=>[L(k(i.title),1)]),_:2},1032,["command"])),64))]),_:1})]),default:e(()=>[t(l,{name:"pifu",width:32,style:{margin:"0 16px",cursor:"pointer"}})]),_:1}),t(l,{name:"icon-user",width:36,style:{"margin-right":"16px"}}),t(f,{onCommand:g},{dropdown:e(()=>[t($,null,{default:e(()=>[t(w,{command:"logout"},{default:e(()=>r[2]||(r[2]=[L("退出登录 ")])),_:1})]),_:1})]),default:e(()=>[b("div",oe,[r[1]||(r[1]=b("label",null,"账号：",-1)),L(" "+k(C(y))+" ",1),t(l,{name:"icon-drop",style:{"margin-left":"10px"}})])]),_:1})])])}}}),le={class:"layout-sidebar"},se={style:{"padding-left":"8px"}},re={style:{"padding-left":"8px"}},ce=M({__name:"Sidebar",setup(T){const{$app:a}=E(),{menu:p,authority:h}=F(),y=S(null);(async()=>{y.value=await h.loadAndSetAuthorityList()})();const{isCollapse:d}=R(p),v=()=>{p.collapseChange(!d.value)},_=c=>{a.$router.push({path:c.url})},o=S(a.$route.path),r=c=>{o.value=c},l=S(a.$route.path),w=()=>{const B=`/${a.$route.path.split("/")[1]}`;l.value=B},$=S([""]),f=()=>{$.value=[l.value]};U(()=>a.$route,()=>{w(),f()});const i=()=>{const B=window.innerWidth<1e3;p.collapseChange(B)};return K(()=>{w(),f();const c=Y(i,200);window.addEventListener("resize",c)}),Z(()=>{window.removeEventListener("resize",i)}),(c,B)=>{const z=s("tu-svg-icon"),I=s("el-menu-item"),j=s("el-sub-menu"),q=s("tempalte"),H=s("el-menu");return n(),x("div",le,[t(H,{"default-active":l.value,"default-openeds":$.value,collapse:C(d),onSelect:r,class:"layout-menu"},{default:e(()=>[(n(!0),x(A,null,N(y.value,(u,Q)=>(n(),m(q,{key:Q},{default:e(()=>[u.children&&u.children.length>0?(n(),m(j,{key:0,index:u.url},{title:e(()=>[t(z,{name:u.icon,width:"16px"},null,8,["name"]),b("span",se,k(u.name),1)]),default:e(()=>[(n(!0),x(A,null,N(u.children,(V,W)=>(n(),m(I,{index:V.url,key:W,onClick:me=>_(V)},{default:e(()=>[L(k(V.name),1)]),_:2},1032,["index","onClick"]))),128))]),_:2},1032,["index"])):(n(),m(I,{key:1,index:u.url,onClick:V=>_(u)},{default:e(()=>[u.url===o.value?(n(),m(z,{key:0,name:u.icon+"2",width:"16px"},null,8,["name"])):(n(),m(z,{key:1,name:u.icon},null,8,["name"])),b("span",re,k(u.name),1)]),_:2},1032,["index","onClick"]))]),_:2},1024))),128))]),_:1},8,["default-active","default-openeds","collapse"]),t(z,{class:P(["flod-btn",{expand:C(d)}]),name:"icon-flod",width:"18px",onClick:v},null,8,["class"])])}}});const ue=X(ce,[["__scopeId","data-v-4d7515b6"]]),de={class:"layout-tab"},_e=M({__name:"Breadcrumb",setup(T){const{$app:a}=E(),p=(g,d)=>g.length-1===d,h=S([]),y=()=>{var r;const g=a.$route.name,_=(a.$route.matched.slice(-2,-1)[0].children||[]).filter(l=>g.includes(l.name)),o=(r=a.$route.query)==null?void 0:r.metaLabel;h.value=_.map((l,w)=>{var f,i;return{title:p(_,w)?o||((f=l.meta)==null?void 0:f.label):(i=l.meta)==null?void 0:i.label,name:l.name,params:a.$route.params}})};return U(()=>a.$route,()=>{y()}),K(()=>{y()}),(g,d)=>{const v=s("el-breadcrumb-item"),_=s("el-breadcrumb");return n(),x("div",de,[t(_,{separator:"/"},{default:e(()=>[(n(!0),x(A,null,N(h.value,(o,r)=>(n(),m(v,{key:r,to:p(h.value,r)?"":{name:o.name,params:o.params},replace:""},{default:e(()=>[L(k(o.title),1)]),_:2},1032,["to"]))),128))]),_:1})])}}}),ie={class:"layout-view"},he=M({__name:"Layout",setup(T){const{authority:a}=F(),{loadAndSetUserInfo:p}=a;return(()=>{p()})(),(y,g)=>{const d=s("el-header"),v=s("router-view"),_=s("el-main"),o=s("el-container");return n(),m(o,{class:P(["layout",{"only-view":C(D)}])},{default:e(()=>[C(D)?O("",!0):(n(),m(d,{key:0,style:{height:"50px"}},{default:e(()=>[t(ae)]),_:1})),t(o,{class:"layout-section"},{default:e(()=>[C(D)?O("",!0):(n(),m(ue,{key:0})),t(_,{class:"layout-main"},{default:e(()=>[t(_e),b("div",ie,[t(v)])]),_:1})]),_:1})]),_:1},8,["class"])}}});export{he as default};
