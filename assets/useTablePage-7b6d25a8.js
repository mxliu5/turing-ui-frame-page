import{k as r,$ as k,F as C,a9 as h,w as d,aa as Q}from"./vendor-31e96ae5.js";import{a as m}from"./index-10a79b7e.js";const I=(c="",i)=>{const s=r({}),u=r({}),y=e=>{s.value=h({},s.value,e),console.log("当前查询数据",s.value)},n=r([]),q=e=>{n.value=e.map(a=>a.id)},v=!!c,{filter:o}=m(),{queryCache:f}=k(o),l=C({init:()=>{const e=f.value[c];if(e){s.value=h({},s.value,e);for(let a in s.value)u.value[a]&&u.value[a].quick&&(u.value[a].quick.modelValue=s.value[`${a}_quick`])}return e},save:()=>{const e={...s.value};for(let a in u.value){const t=u.value[a].quick;t&&(e[`${a}_quick`]=t.modelValue)}o.saveQueryChche(c,e)},reset:()=>{o.resetQueryChche(c)}});return d(()=>[u.value,f.value],()=>{if(v){const e=l.init();i&&i("queryCacheInit",e)}}),Q((e,a,t)=>{v&&(e.name.includes(c)?l.save():l.reset()),t()}),{query:s,queryItems:u,searchQuery:y,selectedIds:n,handleSelectionChange:q,cacheQuery:l}};export{I as u};
