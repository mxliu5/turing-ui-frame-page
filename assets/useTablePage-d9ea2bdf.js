import{r as t,a6 as d,K as k,ae as h,w as C,af as m}from"./vendor-a4bc150f.js";import{a as Q}from"./index-f6df17aa.js";const I=(l="",n)=>{const s=t({}),u=t({}),y=e=>{s.value=h({},s.value,e)},i=t([]),q=e=>{i.value=e.map(a=>a.id)},v=!!l,{filter:r}=Q(),{queryCache:f}=d(r),c=k({init:()=>{const e=f.value[l];if(console.log(9999999,e),e){s.value=h({},s.value,e);for(let a in s.value)u.value[a]&&(u.value[a].modelValue=s.value[a],u.value[a].quick&&(u.value[a].quick.modelValue=s.value[`${a}_quick`]))}return e},save:()=>{const e={...s.value};console.log(22222,e);for(let a in u.value){const o=u.value[a].quick;o&&(e[`${a}_quick`]=o.modelValue)}r.saveQueryChche(l,e)},reset:()=>{r.resetQueryChche(l)}});return C(()=>[u.value,f.value],()=>{if(v){const e=c.init();n&&n("queryCacheInit",e)}}),m((e,a,o)=>{v&&(e.name.includes(l)?c.save():c.reset()),o()}),{query:s,queryItems:u,searchQuery:y,selectedIds:i,handleSelectionChange:q,cacheQuery:c}};export{I as u};
