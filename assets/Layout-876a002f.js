import{g as T,a6 as U,j as c,o as n,p as $,u as x,D as t,l as e,F as B,B as N,W as k,k as m,v as S,t as L,s as G,r as A,w as I,O as K,N as J,P as X,Q as P,x as R}from"./vendor-fa3ed480.js";import{u as F,a as M,l as Y,b as Z,_ as ee,i as E}from"./index-c0c00086.js";const te={class:"layout-header"},ne={class:"tool-bar-left"},oe={class:"tool-bar-right flex"},ae={class:"label-item logou-wrap"},le=T({__name:"Header",setup(V){const{$router:l}=F(),{authority:p,theme:g}=M(),{userName:v}=U(p),y=o=>{o==="logout"&&Z()},u=[{title:"默认主题",type:"default"},{title:"松石绿主题",type:"green"},{title:"暗夜灰",type:"gray"}],h=o=>{g.setTheme(o)},_=o=>{G.setLocalstorage("localeKey",o),l.go(0)};return(o,r)=>{const a=c("tu-svg-icon"),f=c("el-dropdown-item"),w=c("el-dropdown-menu"),b=c("el-dropdown");return n(),$("div",te,[x("div",ne,[t(a,{class:"logo",name:"logo",width:28}),r[0]||(r[0]=x("h2",{class:"logo-text",style:{"margin-left":"12px"}},"基础应用框架",-1))]),x("div",oe,[t(b,{onCommand:_},{dropdown:e(()=>[t(w,null,{default:e(()=>[(n(!0),$(B,null,N(k(Y),(i,s)=>(n(),m(f,{key:s,command:i.value},{default:e(()=>[S(L(i.label),1)]),_:2},1032,["command"]))),128))]),_:1})]),default:e(()=>[t(a,{name:"lang",width:28,style:{cursor:"pointer"}})]),_:1}),t(b,{onCommand:h},{dropdown:e(()=>[t(w,null,{default:e(()=>[(n(),$(B,null,N(u,(i,s)=>t(f,{key:s,command:i.type},{default:e(()=>[S(L(i.title),1)]),_:2},1032,["command"])),64))]),_:1})]),default:e(()=>[t(a,{name:"pifu",width:32,style:{margin:"0 16px",cursor:"pointer"}})]),_:1}),t(a,{name:"icon-user",width:36,style:{"margin-right":"16px"}}),t(b,{onCommand:y},{dropdown:e(()=>[t(w,null,{default:e(()=>[t(f,{command:"logout"},{default:e(()=>r[2]||(r[2]=[S("退出登录 ")])),_:1})]),_:1})]),default:e(()=>[x("div",ae,[r[1]||(r[1]=x("label",null,"账号：",-1)),S(" "+L(k(v))+" ",1),t(a,{name:"icon-drop",style:{"margin-left":"10px"}})])]),_:1})])])}}}),se={class:"layout-sidebar"},ce={style:{"padding-left":"8px"}},re={style:{"padding-left":"8px"}},ue=T({__name:"Sidebar",setup(V){const{$app:l}=F(),{menu:p,authority:g}=M(),v=A(null);(async()=>{v.value=await g.loadAndSetAuthorityList()})();const{isCollapse:u}=U(p),h=()=>{p.collapseChange(!u.value)},_=s=>{l.$router.push({path:s.url})},o=A(l.$route.path),r=s=>{o.value=s},a=A(l.$route.path),f=()=>{const C=`/${l.$route.path.split("/")[1]}`;a.value=C},w=A([""]),b=()=>{w.value=[a.value]};I(()=>l.$route,()=>{f(),b()});const i=()=>{const C=window.innerWidth<1e3;p.collapseChange(C)};return K(()=>{f(),b();const s=J(i,200);window.addEventListener("resize",s)}),X(()=>{window.removeEventListener("resize",i)}),(s,C)=>{const z=c("tu-svg-icon"),O=c("el-menu-item"),Q=c("el-sub-menu"),W=c("tempalte"),j=c("el-menu");return n(),$("div",se,[t(j,{"default-active":a.value,"default-openeds":w.value,collapse:k(u),onSelect:r,class:"layout-menu"},{default:e(()=>[(n(!0),$(B,null,N(v.value,(d,q)=>(n(),m(W,{key:q},{default:e(()=>[d.children&&d.children.length>0?(n(),m(Q,{key:0,index:d.url},{title:e(()=>[t(z,{name:d.icon,width:"16px"},null,8,["name"]),x("span",ce,L(d.name),1)]),default:e(()=>[(n(!0),$(B,null,N(d.children,(D,H)=>(n(),m(O,{index:D.url,key:H,onClick:pe=>_(D)},{default:e(()=>[S(L(D.name),1)]),_:2},1032,["index","onClick"]))),128))]),_:2},1032,["index"])):(n(),m(O,{key:1,index:d.url,onClick:D=>_(d)},{default:e(()=>[d.url===o.value?(n(),m(z,{key:0,name:d.icon+"2",width:"16px"},null,8,["name"])):(n(),m(z,{key:1,name:d.icon},null,8,["name"])),x("span",re,L(d.name),1)]),_:2},1032,["index","onClick"]))]),_:2},1024))),128))]),_:1},8,["default-active","default-openeds","collapse"]),t(z,{class:P(["flod-btn",{expand:k(u)}]),name:"icon-flod",width:"18px",onClick:h},null,8,["class"])])}}});const de=ee(ue,[["__scopeId","data-v-4d7515b6"]]),_e={class:"layout-tab"},ie=T({__name:"Breadcrumb",setup(V){const{$app:l}=F(),p=(y,u)=>y.length-1===u,g=A([]),v=()=>{var r;const y=l.$route.name,u=l.$route.matched.slice(-2,-1)[0],h=u.children||[],_=h.filter(a=>y.includes(a.name)),o=(r=l.$route.query)==null?void 0:r.metaLabel;g.value=_.map((a,f)=>{var i,s,C;const w=p(_,f)?o||((i=a.meta)==null?void 0:i.label):(s=a.meta)==null?void 0:s.label,b=((C=a.name)==null?void 0:C.split("::")).length;return{title:w,name:a.name,params:l.$route.params,level:b}}).sort((a,f)=>a.level-f.level),console.log("当前路由",l.$route),console.log("parentRoute",u),console.log("parentChildren",h),console.log(555,g.value)};return I(()=>l.$route,()=>{v()}),K(()=>{v()}),(y,u)=>{const h=c("el-breadcrumb-item"),_=c("el-breadcrumb");return n(),$("div",_e,[t(_,{separator:"/"},{default:e(()=>[(n(!0),$(B,null,N(g.value,(o,r)=>(n(),m(h,{key:r,to:p(g.value,r)?"":{name:o.name,params:o.params},replace:""},{default:e(()=>[S(L(o.title),1)]),_:2},1032,["to"]))),128))]),_:1})])}}}),me={class:"layout-view"},ge=T({__name:"Layout",setup(V){const{authority:l}=M(),{loadAndSetUserInfo:p}=l;return(()=>{p()})(),(v,y)=>{const u=c("el-header"),h=c("router-view"),_=c("el-main"),o=c("el-container");return n(),m(o,{class:P(["layout",{"only-view":k(E)}])},{default:e(()=>[k(E)?R("",!0):(n(),m(u,{key:0,style:{height:"50px"}},{default:e(()=>[t(le)]),_:1})),t(o,{class:"layout-section"},{default:e(()=>[k(E)?R("",!0):(n(),m(de,{key:0})),t(_,{class:"layout-main"},{default:e(()=>[t(ie),x("div",me,[t(h)])]),_:1})]),_:1})]),_:1},8,["class"])}}});export{ge as default};
