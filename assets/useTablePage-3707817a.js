import{r as n,a5 as d,J as Q,ac as v,w as p,ad as q}from"./vendor-47c5f7a7.js";import{a as g}from"./index-f30f1b4a.js";const w=(s="",l)=>{const h=!!s,a=n({}),u=n({}),f=e=>{a.value=v({},a.value,e)},o=n([]),y=e=>{o.value=e.map(r=>r.id)},{filter:t}=g(),{queryCache:i}=d(t),c=Q({init:()=>{const e=i.value[s];if(e){a.value=v({},a.value,e);for(let r in a.value)u.value[r]&&(u.value[r].modelValue=a.value[r])}return e},save:()=>{t.saveQueryChche(s,a.value)},reset:()=>{t.resetQueryChche(s)}});return p(()=>[u.value,i.value],()=>{if(h){const e=c.init();l&&l("queryCacheInit",e)}}),q((e,r,C)=>{s&&e.name.includes(s)?c.save():c.reset(),C()}),{query:a,queryItems:u,searchQuery:f,selectedIds:o,handleSelectionChange:y,cacheQuery:c}};export{w as u};
