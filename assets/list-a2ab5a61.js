import{g as V,a9 as v,r as A,J as S,j as c,o as $,p as P,C as n,l as s,u as p,t as i,V as o,s as W}from"./vendor-47c5f7a7.js";import{u as B,$ as t,g as N}from"./index-f30f1b4a.js";import{u as L}from"./useTablePage-3707817a.js";const O={class:"mock-list"},j={style:{display:"inline-block",color:"red","margin-left":"5px"}},w="mock-demo2",H=V({__name:"list",setup(Q){const{$app:r,proxy:z,$router:x}=B(),{query:h,queryItems:y,searchQuery:k,selectedIds:g,handleSelectionChange:C}=L(w),f=v.createRangeByDay(2,!0);h.value={dateRange:f},y.value={dateRange:{modelValue:f,type:"dateQuick",label:"选择日期",width:"310px",attrs:{clearable:!1},quick:{options:[{value:2,label:"昨日"},{value:7,label:"近七日"},{value:30,label:"近30日"},{value:v.getDaysInLastYear(),label:"近1年"}],modelValue:2,withTime:!0}},keywords:{type:"el-input",label:"关键词搜索",width:"180px",attrs:{placeholder:"请输入关键字进行搜索"}},appId:{type:"el-input",label:"APPID",width:"180px",attrs:{placeholder:"请输入APPID进行搜索"}},type:{modelValue:"",type:"el-select",label:"类型",width:"160px",options:[{value:1,label:"黑名单"},{value:2,label:"白名单"}],attrs:{placeholder:"单选按钮"}},status:{modelValue:void 0,type:"el-select",label:"状态",width:"180px",options:[{value:1,label:"已发布"},{value:2,label:"未发布"},{value:3,label:"已驳回"},{value:4,label:"上线审核中"},{value:5,label:"下线审核中"}],attrs:{placeholder:"多选按钮",multiple:!0}},city:{label:"城市",modelValue:[],type:"el-cascader",options:[{code:"anhui",name:"安徽",children:[{code:"hefei",name:"合肥"},{code:"fuyang",name:"阜阳"},{code:"tongning",name:"铜陵"}]},{code:"jiangsu",name:"江苏",children:[{code:"nanjing",name:"南京"},{code:"suzhou",name:"苏州"},{code:"wuxi",name:"无锡"}]}],attrs:{props:{checkStrictly:!0,value:"code",label:"name",children:"children"}}},angentType:{modelValue:"xh",type:"el-radio-group",childCompName:"el-radio-button",label:"智能体类型",options:[{value:"xh",label:"星火"},{value:"znt",label:"智能体"},{value:"rwl",label:"任务链"}]}};const T=({timeRange:e=[],dateRange:a=[],...l})=>{const[d,m]=a;return{...l,startDate:d,endDate:m}},D=A([{prop:"name",label:t("common.name"),minWidth:180,custom:"link",customRender:{click:e=>{u.detail(e)}}},{prop:"appId",label:"APPID",withCopy:!0,minWidth:280,showOverflowTooltip:!1},{prop:"type",label:t("common.type"),minWidth:150,custom:"tag-status",customRender:{options:{1:{type:"danger",name:"黑名单"},2:{type:"primary",name:"白名单"}}}},{prop:"status",label:t("common.status"),minWidth:150,custom:"status",customRender:{options:{1:{type:"success",name:"已发布"},2:{type:"info",name:"未发布"},3:{type:"danger",name:"已驳回"},4:{type:"warning",name:"上线审核中"},5:{type:"primary",name:"下线审核中"}}}},{prop:"enable",label:t("common.enableOrNot"),minWidth:150,custom:"switch",customRender:{beforeChange:e=>new Promise((a,l)=>{e.enable===1?r.$confirm({title:"确定禁用？"}).then(()=>{a(!0)}).catch(()=>{l()}):a(!0)})}},{prop:"num",label:"关联数量",minWidth:100,custom:"link",blod:!0,customRender:{disabled:e=>e.num===0,click:e=>{console.log(e)}}},{prop:"customText",label:"自定义插槽11",custom:"slot",minWidth:280},{prop:"date",label:t("common.updateTime"),minWidth:180},{prop:"operation",label:t("common.operation"),width:180,fixed:"right"}]),q=[{type:"edit",label:t("btn.edit")},{type:"delete",label:t("btn.delete"),btnType:"danger",disabled:e=>e.status===3},{type:"publish",label:t("btn.publish"),exist:e=>[2,3].includes(e.status)},{type:"offline",label:t("btn.publish"),exist:e=>e.status===1}],R=e=>{const{type:a,record:l}=e;a==="edit"?console.log("编辑",l):a==="delete"?u.delete(l):a==="publish"?u.publish(l):a==="offline"&&console.log("下线",l)},I=e=>e.map(a=>a),u=S({detail:e=>{x.push({name:`${w}::detail`,query:{id:e.id}})},delete:e=>{console.log(888888),r.$deleteConfirm({title:t("tip.deleteConfirmTitle",{t:"模版名称",n:e.name})}).then(()=>{console.log("删除",e),r.$message.warning("接口待提供！")})},publish:e=>{r.$confirm({title:"确定发布当前模版？"}).then(()=>{console.log("发布",e)}).catch(()=>{})}});return(e,a)=>{const l=c("tu-button"),d=c("Service"),m=c("el-icon"),_=c("table-page");return $(),P("div",O,[n(_,{ref:"myTableRef",oneLine:!1,query:o(h),queryItems:o(y),queryAttrs:{supportFold:!0,searchBtn:{show:!0}},operationAttrs:{selectedTotal:o(g).length},columns:D.value,operations:q,"with-selection":"","selection-option":{selectable:b=>b.status!==1,"reserve-selection":!0},tableAttrs:{"row-key":"id"},loadDataApi:o(N),transformQuery:T,transformListData:I,onHandleOperation:R,onSelectionChange:o(C),onSearch:o(k)},{buttonGroup:s(()=>[n(l,{type:"add"},{default:s(()=>[p(i(o(t)("btn.new")),1)]),_:1}),n(l,{type:"import"},{default:s(()=>[p(i(o(t)("btn.import")),1)]),_:1}),n(l,{type:"export"},{default:s(()=>[p(i(o(t)("btn.export")),1)]),_:1}),n(l,{type:"delete",tooltipButton:{clickable:o(g).length>0,handle:o(t)("btn.delete")}},{default:s(()=>[p(i(o(t)("btn.batchDelete")),1)]),_:1},8,["tooltipButton"])]),customText:s(b=>[n(m,null,{default:s(()=>[n(d)]),_:1}),W("span",j,i(b.row.customText),1)]),_:1},8,["query","queryItems","operationAttrs","columns","selection-option","loadDataApi","onSelectionChange","onSearch"])])}}});export{H as default};
