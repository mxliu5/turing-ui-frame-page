import{g as R,a5 as _,k as A,F as S,r as p,o as $,p as P,N as n,l as s,v as c,t as i,a1 as o,u as W}from"./vendor-31e96ae5.js";import{u as B,$ as t,g as N}from"./index-10a79b7e.js";import{u as L}from"./useTablePage-7b6d25a8.js";const O={class:"mock-list"},V={style:{display:"inline-block",color:"red","margin-left":"5px"}},v="mock-demo2",G=R({__name:"list",setup(j){const{$app:r,proxy:z,$router:w}=B(),{query:h,queryItems:y,searchQuery:x,selectedIds:g,handleSelectionChange:k}=L(v);h.value={dateRange:_.createRangeByDay(7,!0),keywords:"",appId:"",type:void 0,status:void 0,city:[],angentType:"xh"},y.value={dateRange:{type:"quickDate",label:"选择日期",width:"320px",attrs:{clearable:!1,withTime:!0},quick:{modelValue:7,options:[{value:7,label:"近七日"},{value:30,label:"近30日"},{value:_.getDaysInLastYear(),label:"近1年"}]}},keywords:{type:"el-input",label:"关键词搜索",width:"180px",attrs:{placeholder:"请输入关键字进行搜索"}},appId:{type:"el-input",label:"APPID",width:"180px",attrs:{placeholder:"请输入APPID进行搜索"}},type:{type:"el-select",label:"类型",width:"160px",options:[{value:1,label:"黑名单"},{value:2,label:"白名单"}]},status:{type:"el-select",label:"状态",width:"180px",options:[{value:1,label:"已发布"},{value:2,label:"未发布"},{value:3,label:"已驳回"},{value:4,label:"上线审核中"},{value:5,label:"下线审核中"}],attrs:{multiple:!0}},city:{label:"城市",type:"el-cascader",options:[{code:"anhui",name:"安徽",children:[{code:"hefei",name:"合肥"},{code:"fuyang",name:"阜阳"},{code:"tongning",name:"铜陵"}]},{code:"jiangsu",name:"江苏",children:[{code:"nanjing",name:"南京"},{code:"suzhou",name:"苏州"},{code:"wuxi",name:"无锡"}]}],attrs:{props:{checkStrictly:!0,value:"code",label:"name",children:"children"}}},angentType:{type:"el-radio-group",childCompName:"el-radio-button",label:"智能体类型",options:[{value:"xh",label:"星火"},{value:"znt",label:"智能体"},{value:"rwl",label:"任务链"}]}};const C=({timeRange:e=[],dateRange:l=[],...a})=>{const[d,m]=l;return{...a,startDate:d,endDate:m}},D=A([{prop:"name",label:t("common.name"),minWidth:180,custom:"link",customRender:{click:e=>{u.detail(e)}}},{prop:"appId",label:"APPID",withCopy:!0,minWidth:280,showOverflowTooltip:!1},{prop:"type",label:t("common.type"),minWidth:150,custom:"tag-status",customRender:{options:{1:{type:"danger",name:"黑名单"},2:{type:"primary",name:"白名单"}}}},{prop:"status",label:t("common.status"),minWidth:150,custom:"status",customRender:{options:{1:{type:"success",name:"已发布"},2:{type:"info",name:"未发布"},3:{type:"danger",name:"已驳回"},4:{type:"warning",name:"上线审核中"},5:{type:"primary",name:"下线审核中"}}}},{prop:"enable",label:t("common.enableOrNot"),minWidth:150,custom:"switch",customRender:{beforeChange:e=>new Promise((l,a)=>{e.enable===1?r.$confirm({title:"确定禁用？"}).then(()=>{l(!0)}).catch(()=>{a()}):l(!0)})}},{prop:"num",label:"关联数量",minWidth:100,custom:"link",blod:!0,customRender:{disabled:e=>e.num===0,click:e=>{console.log(e)}}},{prop:"desc",label:"自定义插槽11",custom:"slot",minWidth:280},{prop:"date",label:t("common.updateTime"),minWidth:180},{prop:"operation",label:t("common.operation"),width:180,fixed:"right"}]),q=[{type:"edit",label:t("btn.edit")},{type:"delete",label:t("btn.delete"),btnType:"danger",disabled:e=>e.status===3},{type:"publish",label:t("btn.publish"),exist:e=>[2,3].includes(e.status)},{type:"offline",label:t("btn.publish"),exist:e=>e.status===1}],T=e=>{const{type:l,record:a}=e;l==="edit"?console.log("编辑",a):l==="delete"?u.delete(a):l==="publish"?u.publish(a):l==="offline"&&console.log("下线",a)},I=e=>e.map(l=>l),u=S({detail:e=>{w.push({name:`${v}::detail`,query:{id:e.id}})},delete:e=>{console.log(888888),r.$deleteConfirm({title:t("tip.deleteConfirmTitle",{t:"模版名称",n:e.name})}).then(()=>{console.log("删除",e),r.$message.warning("接口待提供！")})},publish:e=>{r.$confirm({title:"确定发布当前模版？"}).then(()=>{console.log("发布",e)}).catch(()=>{})}});return(e,l)=>{const a=p("tu-button"),d=p("Service"),m=p("el-icon"),f=p("table-page");return $(),P("div",O,[n(f,{ref:"myTableRef",oneLine:!1,query:o(h),queryItems:o(y),queryAttrs:{supportFold:!0,searchBtn:{show:!0}},operationAttrs:{selectedTotal:o(g).length},columns:D.value,operations:q,"with-selection":"","selection-option":{selectable:b=>b.status!==1,"reserve-selection":!0},tableAttrs:{"row-key":"id"},loadDataApi:o(N),transformQuery:C,transformListData:I,onHandleOperation:T,onSelectionChange:o(k),onSearch:o(x)},{buttonGroup:s(()=>[n(a,{type:"add"},{default:s(()=>[c(i(o(t)("btn.new")),1)]),_:1}),n(a,{type:"import"},{default:s(()=>[c(i(o(t)("btn.import")),1)]),_:1}),n(a,{type:"export"},{default:s(()=>[c(i(o(t)("btn.export")),1)]),_:1}),n(a,{type:"delete",tooltipButton:{clickable:o(g).length>0,handle:o(t)("btn.delete")}},{default:s(()=>[c(i(o(t)("btn.batchDelete")),1)]),_:1},8,["tooltipButton"])]),desc:s(b=>[n(m,null,{default:s(()=>[n(d)]),_:1}),W("span",V,i(b.row.desc),1)]),_:1},8,["query","queryItems","operationAttrs","columns","selection-option","loadDataApi","onSelectionChange","onSearch"])])}}});export{G as default};
