import{g as T,a6 as U,j as s,o as n,p as x,u as b,D as t,l as e,F as A,B,W as C,k as m,v as L,t as k,s as G,r as S,w as I,O as K,N as J,P as X,Q as P,x as R}from"./vendor-a4bc150f.js";import{u as F,a as M,l as Y,b as Z,_ as ee,i as E}from"./index-1f1e5d7f.js";const te={class:"layout-header"},ne={class:"tool-bar-left"},oe={class:"tool-bar-right flex"},ae={class:"label-item logou-wrap"},le=T({__name:"Header",setup(V){const{$router:a}=F(),{authority:p,theme:h}=M(),{userName:y}=U(p),g=o=>{o==="logout"&&Z()},d=[{title:"默认主题",type:"default"},{title:"松石绿主题",type:"green"},{title:"暗夜灰",type:"gray"}],v=o=>{h.setTheme(o)},_=o=>{G.setLocalstorage("localeKey",o),a.go(0)};return(o,r)=>{const l=s("tu-svg-icon"),w=s("el-dropdown-item"),$=s("el-dropdown-menu"),f=s("el-dropdown");return n(),x("div",te,[b("div",ne,[t(l,{class:"logo",name:"logo",width:28}),r[0]||(r[0]=b("h2",{class:"logo-text",style:{"margin-left":"12px"}},"基础应用框架",-1))]),b("div",oe,[t(f,{onCommand:_},{dropdown:e(()=>[t($,null,{default:e(()=>[(n(!0),x(A,null,B(C(Y),(i,c)=>(n(),m(w,{key:c,command:i.value},{default:e(()=>[L(k(i.label),1)]),_:2},1032,["command"]))),128))]),_:1})]),default:e(()=>[t(l,{name:"lang",width:28,style:{cursor:"pointer"}})]),_:1}),t(f,{onCommand:v},{dropdown:e(()=>[t($,null,{default:e(()=>[(n(),x(A,null,B(d,(i,c)=>t(w,{key:c,command:i.type},{default:e(()=>[L(k(i.title),1)]),_:2},1032,["command"])),64))]),_:1})]),default:e(()=>[t(l,{name:"pifu",width:32,style:{margin:"0 16px",cursor:"pointer"}})]),_:1}),t(l,{name:"icon-user",width:36,style:{"margin-right":"16px"}}),t(f,{onCommand:g},{dropdown:e(()=>[t($,null,{default:e(()=>[t(w,{command:"logout"},{default:e(()=>r[2]||(r[2]=[L("退出登录 ")])),_:1})]),_:1})]),default:e(()=>[b("div",ae,[r[1]||(r[1]=b("label",null,"账号：",-1)),L(" "+k(C(y))+" ",1),t(l,{name:"icon-drop",style:{"margin-left":"10px"}})])]),_:1})])])}}}),se={class:"layout-sidebar"},re={style:{"padding-left":"8px"}},ce={style:{"padding-left":"8px"}},ue=T({__name:"Sidebar",setup(V){const{$app:a}=F(),{menu:p,authority:h}=M(),y=S(null);(async()=>{y.value=await h.loadAndSetAuthorityList()})();const{isCollapse:d}=U(p),v=()=>{p.collapseChange(!d.value)},_=c=>{a.$router.push({path:c.url})},o=S(a.$route.path),r=c=>{o.value=c},l=S(a.$route.path),w=()=>{const N=`/${a.$route.path.split("/")[1]}`;l.value=N},$=S([""]),f=()=>{$.value=[l.value]};I(()=>a.$route,()=>{w(),f()});const i=()=>{const N=window.innerWidth<1e3;p.collapseChange(N)};return K(()=>{w(),f();const c=J(i,200);window.addEventListener("resize",c)}),X(()=>{window.removeEventListener("resize",i)}),(c,N)=>{const z=s("tu-svg-icon"),O=s("el-menu-item"),Q=s("el-sub-menu"),W=s("tempalte"),j=s("el-menu");return n(),x("div",se,[t(j,{"default-active":l.value,"default-openeds":$.value,collapse:C(d),onSelect:r,class:"layout-menu"},{default:e(()=>[(n(!0),x(A,null,B(y.value,(u,q)=>(n(),m(W,{key:q},{default:e(()=>[u.children&&u.children.length>0?(n(),m(Q,{key:0,index:u.url},{title:e(()=>[t(z,{name:u.icon,width:"16px"},null,8,["name"]),b("span",re,k(u.name),1)]),default:e(()=>[(n(!0),x(A,null,B(u.children,(D,H)=>(n(),m(O,{index:D.url,key:H,onClick:pe=>_(D)},{default:e(()=>[L(k(D.name),1)]),_:2},1032,["index","onClick"]))),128))]),_:2},1032,["index"])):(n(),m(O,{key:1,index:u.url,onClick:D=>_(u)},{default:e(()=>[u.url===o.value?(n(),m(z,{key:0,name:u.icon+"2",width:"16px"},null,8,["name"])):(n(),m(z,{key:1,name:u.icon},null,8,["name"])),b("span",ce,k(u.name),1)]),_:2},1032,["index","onClick"]))]),_:2},1024))),128))]),_:1},8,["default-active","default-openeds","collapse"]),t(z,{class:P(["flod-btn",{expand:C(d)}]),name:"icon-flod",width:"18px",onClick:v},null,8,["class"])])}}});const de=ee(ue,[["__scopeId","data-v-4d7515b6"]]),_e={class:"layout-tab"},ie=T({__name:"Breadcrumb",setup(V){const{$app:a}=F(),p=(g,d)=>g.length-1===d,h=S([]),y=()=>{var r;const g=a.$route.name,_=(a.$route.matched.slice(-2,-1)[0].children||[]).filter(l=>g.includes(l.name)),o=(r=a.$route.query)==null?void 0:r.metaLabel;h.value=_.map((l,w)=>{var f,i;return{title:p(_,w)?o||((f=l.meta)==null?void 0:f.label):(i=l.meta)==null?void 0:i.label,name:l.name,params:a.$route.params}})};return I(()=>a.$route,()=>{y()}),K(()=>{y()}),(g,d)=>{const v=s("el-breadcrumb-item"),_=s("el-breadcrumb");return n(),x("div",_e,[t(_,{separator:"/"},{default:e(()=>[(n(!0),x(A,null,B(h.value,(o,r)=>(n(),m(v,{key:r,to:p(h.value,r)?"":{name:o.name,params:o.params},replace:""},{default:e(()=>[L(k(o.title),1)]),_:2},1032,["to"]))),128))]),_:1})])}}}),me={class:"layout-view"},ye=T({__name:"Layout",setup(V){const{authority:a}=M(),{loadAndSetUserInfo:p}=a;return(()=>{p()})(),(y,g)=>{const d=s("el-header"),v=s("router-view"),_=s("el-main"),o=s("el-container");return n(),m(o,{class:P(["layout",{"only-view":C(E)}])},{default:e(()=>[C(E)?R("",!0):(n(),m(d,{key:0,style:{height:"50px"}},{default:e(()=>[t(le)]),_:1})),t(o,{class:"layout-section"},{default:e(()=>[C(E)?R("",!0):(n(),m(de,{key:0})),t(_,{class:"layout-main"},{default:e(()=>[t(ie),b("div",me,[t(v)])]),_:1})]),_:1})]),_:1},8,["class"])}}});export{ye as default};
